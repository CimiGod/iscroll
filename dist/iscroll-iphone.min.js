var iScroll=function(t,i,s){function e(t,s){this.wrapper="string"==typeof t?i.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={startX:0,startY:0,scrollX:!0,scrollY:!0,lockDirection:!0,overshoot:!0,momentum:!0,HWCompositing:!0,useTransition:!0,useTransform:!0};for(var e in s)this.options[e]=s[e];this.options.HWCompositing||(o.style.translateZ=""),this.options.useTransition=o.hasTransition&&this.options.useTransition,this.options.useTransform=o.hasTransform&&this.options.useTransform,this.options.useTransition&&(this.scroller.style[o.style.transitionTimingFunction]="cubic-bezier(0.33,0.66,0.66,1)"),this._initEvents(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY,0),this.enabled=!0}var o=function(){function e(t){return r===!1?!1:""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}var o={},n=i.createElement("div").style,r=function(){for(var t,i=["t","webkitT","MozT","msT","OT"],s=0,e=i.length;e>s;s++)if(t=i[s]+"ransform",t in n)return i[s].substr(0,i[s].length-1);return!1}();o.getTime=Date.now||function(){return(new Date).getTime()},o.rAF=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(i){t.setTimeout(i,1e3/60)},o.extend=function(t,i){for(var s in i)t[s]=i[s]},o.addEvent=function(t,i,s,e){t.addEventListener(i,s,!!e)},o.removeEvent=function(t,i,s,e){t.removeEventListener(i,s,!!e)},o.momentum=function(t,i,e,o,n){var r,h,a=t-i,l=s.abs(a)/e,c=9e-4;return r=t+l*l/(2*c)*(0>a?-1:1),h=l/c,o>r?(r=n?o-n/2*(l/10):o,a=s.abs(r-t),h=a/l):r>0&&(r=n?n/2*(l/10):0,a=s.abs(t)+r,h=a/l),{destination:s.round(r),duration:h}};var h=e("transform");return o.extend(o,{hasTransform:h!==!1,hasPerspective:e("perspective")in n,hasTouch:"ontouchstart"in t,hasPointer:navigator.msPointerEnabled,hasTransition:e("transition")in n}),o.extend(o.style={},{transform:h,transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),translateZ:o.hasPerspective?" translateZ(0)":""}),o}();return e.prototype.handleEvent=function(t){switch(t.type){case"touchstart":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"MSPointerUp":case"mouseup":this._end(t);break;case"touchcancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t)}},e.prototype._initEvents=function(){o.addEvent(t,"orientationchange",this),o.addEvent(t,"resize",this),o.hasTouch&&(o.addEvent(this.wrapper,"touchstart",this),o.addEvent(t,"touchmove",this),o.addEvent(t,"touchcancel",this),o.addEvent(t,"touchend",this)),o.hasPointer&&(o.addEvent(this.wrapper,"MSPointerDown",this),o.addEvent(t,"MSPointerMove",this),o.addEvent(t,"MSPointerCancel",this),o.addEvent(t,"MSPointerUp",this)),o.addEvent(this.wrapper,"mousedown",this),o.addEvent(t,"mousemove",this),o.addEvent(t,"mousecancel",this),o.addEvent(t,"mouseup",this),o.addEvent(this.scroller,"transitionend",this),o.addEvent(this.scroller,"webkitTransitionEnd",this),o.addEvent(this.scroller,"oTransitionEnd",this),o.addEvent(this.scroller,"MSTransitionEnd",this)},e.prototype.destroy=function(){o.removeEvent(t,"orientationchange",this),o.removeEvent(t,"resize",this),o.hasTouch&&(o.removeEvent(this.wrapper,"touchstart",this),o.removeEvent(t,"touchmove",this),o.removeEvent(t,"touchcancel",this),o.removeEvent(t,"touchend",this)),o.hasPointer&&(o.removeEvent(this.wrapper,"MSPointerDown",this),o.removeEvent(t,"MSPointerMove",this),o.removeEvent(t,"MSPointerCancel",this),o.removeEvent(t,"MSPointerUp",this)),o.removeEvent(this.wrapper,"mousedown",this),o.removeEvent(t,"mousemove",this),o.removeEvent(t,"mousecancel",this),o.removeEvent(t,"mouseup",this),o.removeEvent(this.scroller,"transitionend",this),o.removeEvent(this.scroller,"webkitTransitionEnd",this),o.removeEvent(this.scroller,"oTransitionEnd",this),o.removeEvent(this.scroller,"MSTransitionEnd",this)},e.prototype._transitionEnd=function(t){t.target==this.scroller&&(this._transitionTime(0),this.resetPosition(435))},e.prototype._transitionTime=function(t){t=t||0,this.scrollerStyle[o.style.transitionDuration]=t+"ms"},e.prototype._start=function(t){if(this.enabled&&(!this.initiated||t.type==this.initiated)){var i,s=t.touches?t.touches[0]:t;this.initiated=t.type,this.moved=!1,this.distX=0,this.distY=0,this.directionLocked=0,this._transitionTime(),this.isAnimating=!1,this.options.momentum&&(i=this.getComputedPosition(this.scroller),(i.x!=this.x||i.y!=this.y)&&this._translate(i.x,i.y)),this.startX=this.x,this.startY=this.y,this.pointX=s.pageX,this.pointY=s.pageY,this.startTime=o.getTime()}},e.prototype._move=function(t){if(this.enabled&&this.initiated){var i,e,n,r,h=t.touches?t.touches[0]:t,a=this.hasHorizontalScroll?h.pageX-this.pointX:0,l=this.hasVerticalScroll?h.pageY-this.pointY:0,c=o.getTime();this.pointX=h.pageX,this.pointY=h.pageY,this.distX+=a,this.distY+=l,n=s.abs(this.distX),r=s.abs(this.distY),10>n&&10>r||(!this.directionLocked&&this.options.lockDirection&&(this.directionLocked=n>r+5?"h":r>n+5?"v":"n"),"h"==this.directionLocked?l=0:"v"==this.directionLocked&&(a=0),i=this.x+a,e=this.y+l,(i>0||this.maxScrollX>i)&&(i=this.options.overshoot?this.x+a/3:i>0?0:this.maxScrollX),(e>0||this.maxScrollY>e)&&(e=this.options.overshoot?this.y+l/3:e>0?0:this.maxScrollY),this.moved=!0,c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y),this._translate(i,e))}},e.prototype._end=function(t){if(this.enabled&&this.initiated){var i,e,n,r=(t.changedTouches?t.changedTouches[0]:t,o.getTime()-this.startTime),h=s.round(this.x),a=s.round(this.y);this.initiated=!1,this.resetPosition(300)||this.moved&&(this.options.momentum&&300>r&&(i=this.hasHorizontalScroll?o.momentum(this.x,this.startX,r,this.maxScrollX,this.options.overshoot?this.wrapperWidth:0):{destination:h,duration:0},e=this.hasVerticalScroll?o.momentum(this.y,this.startY,r,this.maxScrollY,this.options.overshoot?this.wrapperHeight:0):{destination:a,duration:0},h=i.destination,a=e.destination,n=s.max(i.duration,e.duration)),(h!=this.x||a!=this.y)&&this.scrollTo(h,a,n))}},e.prototype._animate=function(t,i,e){function n(){var d,m,p,u=o.getTime();return u>=c?(r.isAnimating=!1,r._translate(t,i),r.resetPosition(435),void 0):(u=(u-l)/e-1,p=s.sqrt(1-u*u),d=(t-h)*p+h,m=(i-a)*p+a,r._translate(d,m),r.isAnimating&&rAF(n),void 0)}var r=this,h=this.x,a=this.y,l=o.getTime(),c=l+e;this.isAnimating=!0,n()},e.prototype._resize=function(){this.refresh(),this.resetPosition()},e.prototype.resetPosition=function(t){if(0>=this.x&&this.x>=this.maxScrollX&&0>=this.y&&this.y>=this.maxScrollY)return!1;var i=this.x,s=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?i=0:this.x<this.maxScrollX&&(i=this.maxScrollX),!this.hasVerticalScroll||this.y>0?s=0:this.y<this.maxScrollY&&(s=this.maxScrollY),this.scrollTo(i,s,t),!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.enable=function(){this.enabled=!0},e.prototype.refresh=function(){this.wrapper.offsetHeight,this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=s.round(this.scroller.offsetWidth),this.scrollerHeight=s.round(this.scroller.offsetHeight),this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&0>this.maxScrollX,this.hasVerticalScroll=this.options.scrollY&&0>this.maxScrollY},e.prototype.scrollBy=function(t,i,s){t=this.x+t,i=this.y+i,s=s||0,this.scrollTo(t,i,s)},e.prototype.scrollTo=function(t,i,s){!s||this.options.useTransition?(this._transitionTime(s),this._translate(t,i)):this._animate(t,i,s)},e.prototype._translate=function(t,i){this.scrollerStyle[o.style.transform]="translate("+t+"px,"+i+"px)"+o.style.translateZ,this.x=t,this.y=i},e.prototype.getComputedPosition=function(t){var i=getComputedStyle(t,null);return i=i[o.style.transform].split(")")[0].split(", "),{x:+(i[12]||i[4]),y:+(i[13]||i[5])}},e}(window,document,Math);